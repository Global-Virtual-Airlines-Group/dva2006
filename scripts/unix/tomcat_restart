#!/bin/bash
# Tomcat restart script
# (c) 2005, 2006, 2008, 2009, 2011 Global Virtual Airlines Group. All Rights Reserved.

# Mark side as down
touch /var/run/siteDown.flag

# Stop Tomcat
echo "Shutting down Tomcat"
/etc/init.d/tomcat stop
sleep 10

if [ -f "/var/run/tomcat60.pid" ]
then
 if [ -d "/proc/`cat /var/run/tomcat60.pid`" ]
 then
  echo "Killing process `cat /var/run/tomcat60.pid`"
  kill -9 `cat /var/run/tomcat60.pid`
 fi
fi

# Clean up
echo "Cleaning out PID file"
rm /var/run/tomcat60.pid

# Start Tomcat and Apache
echo "Restarting Tomcat"
/etc/init.d/tomcat start

# Mark site as up
rm /var/run/siteDown.flag
